/** @ekoindia/aeps-gateway-lib v1.4.0 */
var EkoAEPSGateway=function(i,l){function e(t,n){return t&&t[n]&&"object"==typeof t[n]?JSON.stringify(t[n]):void 0}var r={local:"http://localhost:3004",development:"https://stagegateway.eko.in",production:"https://gateway.eko.in"},s="development",c={env:s},a=null,o=null,u=null,d=l.createElement.bind(l),p="EkoAePS";return function(){i.addEventListener("message",function(t){var n=null;t&&t.origin===r[c.env||s]&&t.data&&(n=t.data.eko_gateway_response)&&(a&&"debit-hook"===n.action?a(n):o&&"response"===n.action&&o(n))}.bind(this)),this.config=function(t){t&&(c=Object.assign(c,t))},this.setCallbackURL=function(t,n){t&&(c.callback_url=t,c.callback_url_custom_params=e(n,"parameters"),c.callback_url_custom_headers=e(n,"headers"))},this.setConfirmationCallbackFunction=function(t){if(t){if(!c.callback_url)return a=t,!0;console.error(p,"Callback URL already set")}return!1},this.setResponseCallbackFunction=function(t){return!!t&&(o=t,!0)},this.confirmTransaction=function(t){var n=t||{};n.action="go",n.allow=!0,u&&u.pm({eko_gateway_request:n},"*")},this.rejectTransaction=function(t){var n={action:"go",allow:!1,message:t||""};u&&u.pm(n,"*")},this.open=function(){var t=(r[c.env]||r[s])+"/v2/aeps",n=d("form"),e=n.setAttribute.bind(n),a=null,o=null;for(a in e("method","post"),e("action",t),e("target",p),(u=i.open("",p)).pm=u.postMessage.bind(i),c)(o=d("input")).type="hidden",o.name=a,o.value=c[a],n.appendChild(o);l.body.appendChild(n),n.submit(),l.body.removeChild(n)}}}(window,document);