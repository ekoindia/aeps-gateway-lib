/** @ekoindia/aeps-gateway-lib v1.5.0 */
var EkoAEPSGateway=function(i,r){function e(t,n){return JSON.stringify(t&&t[n]&&"object"==typeof t[n]?t[n]:{})}var s={local:"http://localhost:3004",uat:"https://stagegateway.eko.in",production:"https://gateway.eko.in"},l="production",c={environment:l},a=null,o=null,u=null,d=r.createElement.bind(r),p="EkoAePS";return function(){i.addEventListener("message",function(t){var n=null;t&&t.origin===s[c.environment||l]&&t.data&&(n=t.data.eko_gateway_response)&&(a&&"debit-hook"===n.action?a(n):o&&"response"===n.action&&o(n))}.bind(this)),this.config=function(t){t&&(c=Object.assign(c,t))},this.setCallbackURL=function(t,n){t&&(c.callback_url=t,c.callback_url_custom_params=e(n,"parameters"),c.callback_url_custom_headers=e(n,"headers"))},this.setConfirmationCallbackFunction=function(t){if(t){if(!c.callback_url)return a=t,!0;console.error(p,"Callback URL already set")}return!1},this.setResponseCallbackFunction=function(t){return!!t&&(o=t,!0)},this.confirmTransaction=function(t){var n=t||{};n.action="go",n.allow=!0,u&&u.postMessage({eko_gateway_request:n},"*")},this.rejectTransaction=function(t){var n={action:"go",allow:!1,message:t||""};u&&u.postMessage(n,"*")},this.open=function(){var t=(s[c.environment]||s[l])+"/v2/aeps",n=d("form"),e=n.setAttribute.bind(n),a=null,o=null;for(a in e("method","post"),e("action",t),e("target",p),u=i.open("",p),c)(o=d("input")).type="hidden",o.name=a,o.value=c[a],n.appendChild(o);r.body.appendChild(n),n.submit(),r.body.removeChild(n)}}}(window,document);