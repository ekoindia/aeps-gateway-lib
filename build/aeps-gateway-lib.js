/** @ekoindia/aeps-gateway-lib v1.3.0 */
var EkoAEPSGateway=function(){function n(t,e){return t&&t[e]&&"object"==typeof t[e]?JSON.stringify(t[e]):void 0}var i={local:"http://localhost:3004",development:"https://stagegateway.eko.in",production:"https://gateway.eko.in"},l="development",r={env:l},a=null,o=null,s=null,c=window,t=document,u=t.body,p=t.createElement,d="EkoAePS";return function(){c.addEventListener("message",function(t){var e=null;t&&t.origin===i[r.env||l]&&t.data&&(e=t.data.eko_gateway_response)&&(a&&"debit-hook"===e.action?a(e):o&&"response"===e.action&&o(e))}.bind(this)),this.config=function(t){t&&(r=Object.assign(r,t))},this.setCallbackURL=function(t,e){t&&(r.callback_url=t,r.callback_url_custom_params=n(e,"parameters"),r.callback_url_custom_headers=n(e,"headers"))},this.setConfirmationCallbackFunction=function(t){if(t){if(!r.callback_url)return a=t,!0;console.error(d,"Callback URL already set")}return!1},this.setResponseCallbackFunction=function(t){return!!t&&(o=t,!0)},this.confirmTransaction=function(t){var e=t||{};e.action="go",e.allow=!0,s&&s.pm({eko_gateway_request:e},"*")},this.rejectTransaction=function(t){var e={action:"go",allow:!1,message:t||""};s&&s.pm(e,"*")},this.open=function(){var t=(i[r.env]||i[l])+"/v2/aeps",e=p("form"),n=e.setAttribute,a=null,o=null;for(a in n("method","post"),n("action",t),n("target",d),(s=c.open("",d)).pm=s.postMessage,r)(o=p("input")).type="hidden",o.name=a,o.value=r[a],e.appendChild(o);u.appendChild(e),e.submit(),u.removeChild(e)}}}();